import{d as $,g as i,n as k,p as f,j as e,A as x,i as _,T as V,s as w,c as B,f as b,h as r,F as N,x as S,a as s,B as T,C as I,q as M,t as y,k as C,m as j,w as L,r as R,l as q}from"./index-2625a230.js";import{u as A}from"./store-11a387d4.js";const E={class:"flex items-center justify-center"},F={class:"bg-white rounded-lg shadow-lg p-8"},W={class:"modal-header"},D={class:"modal-body"},G={class:"modal-footer"},H=$({__name:"Modal",emits:["close"],setup(m,{emit:t}){return(n,o)=>(i(),k(V,{name:"modal"},{default:f(()=>[e("div",{class:"fixed z-10 inset-0 overflow-y-auto",onClick:o[1]||(o[1]=x(c=>t("close"),["self"]))},[e("div",E,[e("div",F,[e("div",W,[_(n.$slots,"header",{},void 0,!0)]),e("div",D,[_(n.$slots,"default",{},void 0,!0)]),e("div",G,[e("button",{class:"btn-del",onClick:o[0]||(o[0]=c=>t("close"))},"Close"),_(n.$slots,"footer",{},void 0,!0)])])])])]),_:3}))}});const J=w(H,[["__scopeId","data-v-0faedaa3"]]),K=$({__name:"Notifier",setup(m){const{state:t}=A(),n=o=>{new Audio(`/audio/${o}.mp3`).play()};return B(()=>{t.notifications.length>0&&(n(t.notifications[0].status),setTimeout(()=>{t.notifications.pop()},3e3))}),(o,c)=>{const u=b("Icon");return i(),r("section",null,[(i(!0),r(N,null,S(s(t).notifications,(l,p)=>(i(),r("div",{style:T([{"z-index":"9999"},{top:p*15+"px"}]),class:I([l.status,"noti"])},[M(y(l.message)+" ",1),C(u,{icon:l.status==="error"?"mdi-alert-circle":l.status==="warning"?"mdi-alert":l.status==="success"?"mdi-check-circle":"mdi-information-variant",class:"rf scale cp tr absolute",onClick:c[0]||(c[0]=d=>s(t).notifications.pop())},null,8,["icon"])],6))),256))])}}});const O=w(K,[["__scopeId","data-v-fffa3092"]]),P={key:0},Q={class:"tl fixed mx-16 my-6 z-50"},U=["src","alt"],X={class:"text-center text-lg font-sans"},Y={class:"text-center text-sm font-sans"},Z={key:1,class:"col center my-12"},tt=e("h1",{class:"text-lg font-sans text-center"},"Not Authenticated",-1),et=$({__name:"Auth",setup(m){const{state:t}=A(),{isAuthenticated:n,loginWithRedirect:o,getAccessTokenSilently:c,user:u,logout:l}=j();L(u,async()=>{u.value&&(t.user=await p())});const p=async()=>{const v=await c(),h=await(await fetch("/api/auth?token="+v)).json();return t.notifications.push({message:"Welcome "+u.value.name,status:"success"}),h},d=R(!1);return(v,a)=>{const h=O,z=J;return i(),r(N,null,[C(h),s(t).user&&s(n)?(i(),r("div",P,[e("div",Q,[e("img",{class:"img-cover x4 cp rf scale sh",src:s(t).user.picture,alt:s(t).user.name,onClick:a[0]||(a[0]=g=>d.value=!s(d))},null,8,U),s(d)?(i(),k(z,{key:0,onClose:a[2]||(a[2]=g=>d.value=!1)},{footer:f(()=>[e("button",{class:"btn-del",onClick:a[1]||(a[1]=x(g=>s(l)(),["prevent"]))},"Logout")]),default:f(()=>[e("p",X,y(s(t).user.name),1),e("p",Y,y(s(t).user.email),1)]),_:1})):q("",!0)]),_(v.$slots,"default")])):(i(),r("div",Z,[tt,e("button",{class:"btn-get",onClick:a[3]||(a[3]=x(g=>s(o)(),["prevent"]))},"Login")]))],64)}}}),st={};function ot(m,t){const n=b("RouterView"),o=et;return i(),k(o,null,{default:f(()=>[C(n)]),_:1})}const it=w(st,[["render",ot]]);export{it as default};
